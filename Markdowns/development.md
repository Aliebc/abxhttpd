# Abxhttpd实现文档

## IO部分

1. 套接字部分采用了poll模型，可以轮询多个文件描述符，根据描述符的状态进行处理，并且没有最大文件描述符数量的限制。
2. 文件流部分重新实现了一个FileStream，采用fread/fwrite通用API，支持跨平台、高速读取。
3. 实现了BasicStream类，使得SocketStream和FileStream派生自BasicStream，揭示二者表象不同而实质上统一的数据结构。
4. 实现了日志类，能够记录用户访问的日志。

## 协议部分

1. 实现了部分基础的HTTP/1.1协议，包括分段读写，Content-Length解析等
2. 实现了大文件缓冲区拷贝，发送超大文件不占用高内存，只占用不超过缓冲区+自身的内存
3. 维护了一个会话映射列表，可以识别出用户每次相同的访问
4. 维护了一个读写列表，可以大批量同时处理不同用户的请求（如同时访问、同时下载等功能）

## 内存/线程管理

1. 通过模版类实现了会话智能指针，能够在用户的每次访问中保存相同的数据，并简化了开发者存取数据的工作，同时能够在预设时间过期后自动析构，不发生内存泄漏。
2. 通过 `<thread>`标准库实现了线程池，能够维护一个任务队列，并行处理任务。

## 算法设计

1. 在解析HTTP协议中用到的字符串映射采用std::map，能够实现用户查找的时间复杂度为O(logN)
